{"version":3,"file":"PopupEdit.js","sourceRoot":"","sources":["PopupEdit.ts"],"names":[],"mappings":"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","sourcesContent":["import constName = require('../../classes/ConstName');\r\nimport config = require('../../config');\r\nimport on = require('dojo/on');\r\nimport dom = require('dojo/dom');\r\nimport domConstruct = require('dojo/dom-construct');\r\nimport esriRequest = require(\"esri/request\");\r\nimport watchUtils = require(\"esri/core/watchUtils\");\r\nimport Point = require(\"esri/geometry/Point\");\r\nimport LocateViewModel = require(\"esri/widgets/Locate/LocateViewModel\");\r\nimport editingSupport = require(\"ditagis/support/Editing\");\r\nimport bootstrap = require('../../toolview/bootstrap');\r\nimport DateTimeDefine = require('../../toolview/DateTimeDefine');\r\ninterface ThoiGianSanXuatTrongTrot {\r\n  OBJECTID: number;\r\n  MaDoiTuong: string;\r\n  NhomCayTrong: number;\r\n  LoaiCayTrong: string;\r\n  DienTich: number;\r\n  ThoiGianTrongTrot: Date\r\n  ThoiGianBatDauTrong: Date;\r\n}\r\nclass PopupEdit {\r\n  view;\r\n  options;\r\n  locateViewModel;\r\n  fireFields;\r\n  inputElement;\r\n  thoiGianSanXuatTrongTrot;\r\n  _layer;\r\n  tmpDatasDetailTrongTrong: {\r\n    adds: Array<ThoiGianSanXuatTrongTrot>,\r\n    edits: Array<ThoiGianSanXuatTrongTrot>,\r\n    updates: Array<ThoiGianSanXuatTrongTrot>,\r\n    deletes: Array<ThoiGianSanXuatTrongTrot>,\r\n    tableDatas: Array<ThoiGianSanXuatTrongTrot>,\r\n    tbody: HTMLTableSectionElement\r\n  }\r\n  constructor(view, options) {\r\n    this.view = view;\r\n    this.options = options;\r\n    this.locateViewModel = new LocateViewModel({\r\n      view: view,\r\n      graphic: null\r\n    })\r\n    this.fireFields = ['NgayCapNhat', 'NguoiCapNhat', 'MaPhuongXa', 'MaHuyenTP', 'MaDoiTuong'];\r\n    this.inputElement = {};\r\n    this.thoiGianSanXuatTrongTrot = options.table;\r\n  }\r\n  get selectFeature() {\r\n    return this.view.popup.viewModel.selectedFeature;\r\n  }\r\n  get layer() {\r\n    return this.selectFeature.layer || this._layer;\r\n  }\r\n  set layer(value) {\r\n    if (this.selectFeature.layer)\r\n      return;\r\n    this._layer = value;\r\n  }\r\n  get attributes() {\r\n    return this.selectFeature.attributes;\r\n  }\r\n  get objectId() {\r\n    return this.attributes['OBJECTID'];\r\n  }\r\n  /**\r\n   * Khởi tạo lại inputElement\r\n   */\r\n  resetInputElement() {\r\n    this.inputElement = {};\r\n  }\r\n  isFireField(fieldName) {\r\n    return this.fireFields.indexOf(fieldName) !== -1;\r\n  }\r\n  /**\r\n   * Lấy subtype của {name} với giá trị {value} trong {layer}\r\n   * @param {*} layer \r\n   * @param {*} name \r\n   * @param {*} value \r\n   * @return subtype\r\n   */\r\n  getSubtype(name?, value?) {\r\n    name = name || this.layer.typeIdField;\r\n    value = value || this.attributes[name];\r\n    if (this.thoiGianSanXuatTrongTrot.typeIdField === name) {\r\n      const typeIdField = this.thoiGianSanXuatTrongTrot.typeIdField, //tên thuộc tính của subtypes\r\n        subtypes = this.thoiGianSanXuatTrongTrot.types, //subtypes\r\n        subtype = subtypes.find(f => f.id == value);\r\n      return subtype;\r\n    }\r\n    return null;\r\n  }\r\n  renderDomain(domain, name) {\r\n    let codedValues;\r\n    if (domain.type === \"inherited\") {\r\n      let fieldDomain = this.layer.getFieldDomain(name);\r\n      if (fieldDomain) codedValues = fieldDomain.codedValues;\r\n    } else { //type is codedValue\r\n      codedValues = domain.codedValues;\r\n    }\r\n    if (!codedValues) return null;\r\n\r\n    let currentValue = this.attributes[name];\r\n    let input = document.createElement('select');\r\n    input.classList.add('form-control');\r\n    let defaultComboValue = document.createElement('option');\r\n    defaultComboValue.value = \"-1\";\r\n    defaultComboValue.innerText = 'Chọn giá trị...';\r\n    input.appendChild(defaultComboValue);\r\n    for (let codedValue of codedValues) {\r\n      let dmCode = codedValue.code,\r\n        dmName = codedValue.name;\r\n      let option = document.createElement('option');\r\n      option.setAttribute('value', dmCode);\r\n      if (currentValue === dmCode) {\r\n        option.selected = true;\r\n      }\r\n      option.innerHTML = dmName;\r\n      input.appendChild(option);\r\n    }\r\n    return input;\r\n  }\r\n  /**\r\n   * Hiển thị popup\r\n   */\r\n  showEdit() {\r\n    let subtype = this.getSubtype();\r\n    this.resetInputElement();\r\n    let div = domConstruct.create('div', {\r\n      id: 'show-edit-container',\r\n      class: 'popup-content'\r\n    });\r\n    let table = domConstruct.create('table', {\r\n      class: \"table\"\r\n    }, div);\r\n    //duyệt thông tin đối tượng\r\n    for (let field of this.layer.fields) {\r\n\r\n      if (field.type === 'oid' || this.isFireField(field.name)\r\n        // || (this.layer.id == constName.TRONGTROT && (field.name == \"NhomCayTrong\" || field.name == \"LoaiCayTrong\"))\r\n      )\r\n        continue;\r\n      //tạo <tr>\r\n      let row = domConstruct.create('tr');\r\n      //tạo <td>\r\n      let tdName = domConstruct.create('td', {\r\n        innerHTML: field.alias\r\n      }),\r\n        input,\r\n        tdValue = domConstruct.create('td');\r\n\r\n      if (subtype && subtype.domains[field.name]) {\r\n        input = this.renderDomain(subtype.domains[field.name], field.name);\r\n      }\r\n      //kiểm tra domain\r\n      else if (field.domain) {\r\n        input = this.renderDomain(field.domain, field.name);\r\n      } else {\r\n        let inputType, value;\r\n        if (field.type === \"small-integer\" ||\r\n          (field.type === \"integer\") ||\r\n          (field.type === \"double\"))\r\n          inputType = 'number';\r\n        else if (field.type === 'date') {\r\n          inputType = 'date';\r\n          var d = new Date(this.attributes[field.name]),\r\n            date: any = d.getDate(),\r\n            month: any = d.getMonth() + 1,\r\n            year = d.getFullYear();\r\n          if (date / 10 < 1)\r\n            date = '0' + date;\r\n          if (month / 10 < 1)\r\n            month = '0' + month;\r\n          value = `${year}-${month}-${date}`;\r\n        } else {\r\n          inputType = 'text';\r\n        }\r\n        //neu du lieu qua lon thi hien thi textarea\r\n        if (length >= this.options.hightLength) {\r\n          input = domConstruct.create('textarea', {\r\n            rows: 5,\r\n            cols: 25,\r\n            class: \"form-control\",\r\n            innerHTML: value || this.attributes[field.name],\r\n            value: value || this.attributes[field.name]\r\n          });\r\n        } else {\r\n          input = domConstruct.create('input', {\r\n            type: inputType,\r\n            value: value || this.attributes[field.name],\r\n            class: \"form-control\"\r\n          });\r\n\r\n        }\r\n      }\r\n      input.name = field.name;\r\n      domConstruct.place(input, tdValue);\r\n      domConstruct.place(tdName, row);\r\n      domConstruct.place(tdValue, row);\r\n      domConstruct.place(row, table);\r\n\r\n      this.inputElement[field.name] = input;\r\n      //thêm vào html\r\n      this.registerChangeEvent(input);\r\n    }\r\n\r\n    // }\r\n    if (this.layer.hasAttachments) {\r\n\r\n\r\n      this.layer.getAttachments(this.objectId).then(res => {\r\n        let div = domConstruct.create('div', {\r\n          class: 'attachment-header',\r\n          id: `attachment-${this.layer.id}-${this.attributes['OBJECTID']}`\r\n        }, document.getElementById('show-edit-container'));\r\n        div.innerText = \"Hình ảnh\";\r\n        let form = document.createElement('form');\r\n        form.id = 'attachment-data';\r\n        form.enctype = 'multipart/form-data';\r\n        form.method = 'post';\r\n        let file = document.createElement('input');\r\n        file.type = 'file';\r\n        file.name = 'attachment';\r\n        form.appendChild(file);\r\n        let hideField = document.createElement('input');\r\n        hideField.hidden = true;\r\n        hideField.name = 'f';\r\n        hideField.value = 'json';\r\n        form.appendChild(hideField);\r\n        div.appendChild(form);\r\n        this.registerChangeEvent(file);\r\n\r\n        if (res && res.attachmentInfos && res.attachmentInfos.length > 0) {\r\n          for (let item of res.attachmentInfos) {\r\n            this.renderAttachmentEditPopup(item, {\r\n              container: div,\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n    for (let key in this.inputElement) {\r\n      this.inputChangeHandler(this.inputElement[key]);\r\n    }\r\n    this.view.popup.content = div;\r\n    this.view.popup.title = this.layer.title;\r\n    //CHANGE ICON FROM UPDATE TO EDIT\r\n    let updateAction = this.view.popup.actions.find(function (action) {\r\n      return action.id === 'update';\r\n    })\r\n    updateAction.className = 'esri-icon-check-mark';\r\n    //ADD ACTON UPDATE GEOMETRY WITH GPS\r\n    this.view.popup.actions.add({\r\n      id: 'update-geometry',\r\n      title: 'Cập nhật vị trí đối tượng',\r\n      className: 'esri-icon-locate'\r\n    })\r\n    let viewDetailAction = this.view.popup.actions.find(function (action) {\r\n      return action.id === 'view-detail';\r\n    })\r\n    if (this.layer.id === constName.TRONGTROT && viewDetailAction) {\r\n      viewDetailAction.id = 'view-detail-edit';\r\n    }\r\n    //RESTORE WHEN OUT EDIT MODE\r\n    var watchFunc = () => {\r\n      //REVERT ICON UPDATE ACTION\r\n      updateAction.className = 'esri-icon-edit';\r\n      //DELETE ACTION UPDATE GEMERTRY WITH GPS\r\n      let action = this.view.popup.actions.find(f => {\r\n        return f.id === 'update-geometry'\r\n      });\r\n      if (action) this.view.popup.actions.remove(action);\r\n      //REVERT ID VIEW DETAIL\r\n      if (this.layer.id === constName.TRONGTROT && viewDetailAction) viewDetailAction.id = 'view-detail';\r\n    }\r\n    watchUtils.once(this.view.popup, 'selectedFeature').then(watchFunc)\r\n    watchUtils.once(this.view.popup, 'visible').then(watchFunc)\r\n  }\r\n  renderAttachmentEditPopup(item, props) {\r\n    const\r\n      container = props.container || document.getElementById(`attachment-${this.layer.id}-${this.attributes['OBJECTID']}`);\r\n\r\n    let url = `${this.layer.url}/${this.layer.layerId}/${this.attributes['OBJECTID']}`;\r\n    let itemDiv = domConstruct.create('div', {\r\n      class: 'attachment-item'\r\n    }, container);\r\n    let itemName = domConstruct.create('div', {\r\n      class: 'attachment-name'\r\n    }, itemDiv);\r\n    let aItemName = domConstruct.create('a', {\r\n      href: `${url}/attachments/${item.id}`,\r\n      target: '_blank'\r\n    }, itemName)\r\n    aItemName.innerText = item.name;\r\n    let itemDelete = domConstruct.create('div', {\r\n      class: 'delete-attachment esri-icon-trash'\r\n    }, itemDiv);\r\n    on(itemDelete, 'click', () => {\r\n      if (!this.attributes.deleteAttachment)\r\n        this.attributes.deleteAttachment = [];\r\n      this.attributes.deleteAttachment.push(`${url}/deleteAttachments?f=json&attachmentIds=${item.id}`);\r\n      container.removeChild(itemDiv);\r\n    });\r\n  }\r\n  registerChangeEvent(input) {\r\n    on(input, 'change', () => this.inputChangeHandler(input));\r\n  }\r\n  /**\r\n   * Khi ô nhập dữ liệu trong popup có sự thay đổi giá trị\r\n   * @param {htmldom} inputDOM \r\n   */\r\n  inputChangeHandler(inputDOM) {\r\n    const name = inputDOM.name,\r\n      value = inputDOM.value;\r\n    if (!value) return;\r\n    if (value == -1) {\r\n      this.attributes[name] = null;\r\n      return;\r\n    } else if (name === 'attachment') {\r\n      this.attributes[name] = value;\r\n    } else {\r\n      const field = this.layer.fields.find(f => f.name === name);\r\n      if (field) {\r\n        let fieldType = field.type;\r\n        if (fieldType) {\r\n          let convertValue;\r\n          if (fieldType === \"small-integer\" || fieldType === \"integer\")\r\n            convertValue = parseInt(value);\r\n          else if (fieldType === \"double\") {\r\n            convertValue = parseFloat(value);\r\n          } else {\r\n            convertValue = value;\r\n          }\r\n          this.attributes[name] = convertValue;\r\n        }\r\n      }\r\n    }\r\n    //check subtype\r\n    let subtypes = this.getSubtype(name);\r\n    if (subtypes) {\r\n      for (let key in subtypes.domains) {\r\n        let subtype = subtypes.domains[key];\r\n        let input = this.inputElement[key];\r\n        let codedValues;\r\n        if (subtype.type === \"inherited\") {\r\n          let fieldDomain = this.layer.getFieldDomain(key);\r\n          if (fieldDomain) codedValues = fieldDomain.codedValues;\r\n        } else {\r\n          codedValues = subtype.codedValues;\r\n        }\r\n        if (input.tagName === 'SELECT') {\r\n          input.innerHTML = '';\r\n          let defaultComboValue = document.createElement('option');\r\n          defaultComboValue.value = \"-1\";\r\n          defaultComboValue.innerText = 'Chọn giá trị...';\r\n          input.appendChild(defaultComboValue);\r\n          for (let codedValue of codedValues) {\r\n            let option = document.createElement('option');\r\n            option.setAttribute('value', codedValue.code);\r\n            option.innerText = codedValue.name;\r\n            if (codedValue.code === this.attributes[key])\r\n              option.setAttribute('selected', 'selected');\r\n            input.appendChild(option);\r\n          }\r\n          this.attributes[key] = input.value == -1 ? null : input.value;\r\n        } else {\r\n          let dom = document.createElement('select');\r\n          dom.classList.add('form-control');\r\n          dom.setAttribute('name', key);\r\n          let defaultComboValue = document.createElement('option');\r\n          defaultComboValue.value = \"-1\";\r\n          defaultComboValue.innerText = 'Chọn giá trị...';\r\n          dom.appendChild(defaultComboValue);\r\n          this.registerChangeEvent(dom);\r\n          for (let codedValue of codedValues) {\r\n            let option = document.createElement('option');\r\n            option.setAttribute('value', codedValue.code);\r\n            option.innerText = codedValue.name;\r\n            dom.appendChild(option);\r\n          }\r\n          if (input.parentElement) {\r\n            let parent = input.parentElement;\r\n            input.parentElement.removeChild(parent.firstChild);\r\n            parent.appendChild(dom);\r\n          }\r\n          this.attributes[key] = input.value == -1 ? null : input.value;\r\n          this.inputElement[key] = dom;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  addDetailTrongTrot() {\r\n    let div = document.createElement('div');\r\n    let divInfo, formGroupNCT, formGroupLCT, formGroupArea, formGroupTime, formGroupTGTH, formGroupTGTT, btnAdd;\r\n    divInfo = document.createElement('div');\r\n\r\n    //LOAI CAY TRONG\r\n    formGroupLCT = document.createElement('div');\r\n    formGroupLCT.classList.add('form-group');\r\n    let lbLCT, inputLCT;\r\n    inputLCT = document.createElement('select');\r\n    inputLCT.id = 'LoaiCayTrong';\r\n    inputLCT.classList.add('form-control');\r\n    lbLCT = document.createElement('label');\r\n    lbLCT.innerText = 'Loại cây trồng';\r\n    lbLCT.setAttribute('for', inputLCT.id);\r\n    formGroupLCT.appendChild(lbLCT);\r\n    formGroupLCT.appendChild(inputLCT)\r\n\r\n    //NHOM CAY TRONG\r\n    formGroupNCT = document.createElement('div');\r\n    formGroupNCT.classList.add('form-group');\r\n    let lbNCT, inputNCT;\r\n    inputNCT = document.createElement('select');\r\n    inputNCT.id = 'NhomCayTrong';\r\n    inputNCT.classList.add('form-control');\r\n    let codedValues = this.layer.getFieldDomain('NhomCayTrong').codedValues;\r\n    for (let codedValue of codedValues) {\r\n      let dmCode = codedValue.code,\r\n        dmName = codedValue.name;\r\n      let option = document.createElement('option');\r\n      option.setAttribute('value', dmCode);\r\n      option.innerHTML = dmName;\r\n      inputNCT.appendChild(option);\r\n    }\r\n    var inputNCTChange = () => {\r\n      inputLCT.innerHTML = '';\r\n      let defaultComboValue = document.createElement('option');\r\n      defaultComboValue.value = \"-1\";\r\n      defaultComboValue.innerText = 'Chọn giá trị...';\r\n      inputLCT.appendChild(defaultComboValue);\r\n      let subtype = this.getSubtype('NhomCayTrong', inputNCT.value);\r\n      if (!subtype) return;\r\n      let domain = subtype.domains['LoaiCayTrong'];\r\n      if (!domain) return;\r\n      let codedValues;\r\n      if (domain.type === \"inherited\") {\r\n        let fieldDomain = this.layer.getFieldDomain('LoaiCayTrong');\r\n        if (fieldDomain) codedValues = fieldDomain.codedValues;\r\n      } else { //type is codedValue\r\n        codedValues = domain.codedValues;\r\n      }\r\n      if (!codedValues) return;\r\n      for (let codedValue of codedValues) {\r\n        let dmCode = codedValue.code,\r\n          dmName = codedValue.name;\r\n        let option = document.createElement('option');\r\n        option.setAttribute('value', dmCode);\r\n        option.innerHTML = dmName;\r\n        inputLCT.appendChild(option);\r\n      }\r\n    }\r\n    on(inputNCT, 'change', () => {\r\n      inputNCTChange();\r\n    })\r\n    inputNCTChange();\r\n    lbNCT = document.createElement('label');\r\n    lbNCT.innerText = 'Nhóm cây trồng';\r\n    lbNCT.setAttribute('for', inputNCT.id);\r\n    formGroupNCT.appendChild(lbNCT);\r\n    formGroupNCT.appendChild(inputNCT);\r\n\r\n    //DIEN TICH\r\n    formGroupArea = document.createElement('div');\r\n    formGroupArea.classList.add('form-group');\r\n    let lbArea, inputArea;\r\n    inputArea = document.createElement('input');\r\n    inputArea.type = 'number';\r\n    inputArea.id = 'DienTich';\r\n    inputArea.classList.add('form-control');\r\n    lbArea = document.createElement('label');\r\n    lbArea.innerText = 'Diện tích';\r\n    lbArea.setAttribute('for', inputArea.id);\r\n    formGroupArea.appendChild(lbArea);\r\n    formGroupArea.appendChild(inputArea);\r\n\r\n    // Thoi gian trong trot\r\n    formGroupTGTT = document.createElement('div');\r\n    formGroupTGTT.classList.add('form-group');\r\n    let inputTGTT, lbTGTT;\r\n    inputTGTT = document.createElement('input');\r\n    inputTGTT.type = 'date';\r\n    inputTGTT.id = 'ThoiGianTrongTrot';\r\n    inputTGTT.classList.add('form-control');\r\n    lbTGTT = document.createElement('label');\r\n    lbTGTT.innerText = 'Thời gian trồng trọth';\r\n    lbTGTT.setAttribute('for', inputTGTT.id);\r\n    formGroupTGTT.appendChild(lbTGTT);\r\n    formGroupTGTT.appendChild(inputTGTT);\r\n    // Ngay thu hoach\r\n    formGroupTGTH = document.createElement('div');\r\n    formGroupTGTH.classList.add('form-group');\r\n    let inputTime, lbTime;\r\n    inputTime = document.createElement('input');\r\n    inputTime.type = 'date';\r\n    inputTime.id = 'ThoiGianBatDauTrong';\r\n    inputTime.classList.add('form-control');\r\n    lbTime = document.createElement('label');\r\n    lbTime.innerText = 'Ngày thu hoạch';\r\n    lbTime.setAttribute('for', inputTime.id);\r\n    formGroupTGTH.appendChild(lbTime);\r\n    formGroupTGTH.appendChild(inputTime);\r\n\r\n    //Add\r\n    btnAdd = document.createElement('button');\r\n    btnAdd.classList.add('btn', 'btn-primary');\r\n    btnAdd.innerText = \"Thêm\";\r\n    on(btnAdd, 'click', () => {\r\n      var length = this.tmpDatasDetailTrongTrong.adds.length;\r\n      let data = {\r\n        OBJECTID: length + 1,\r\n        MaDoiTuong: this.attributes['MaDoiTuong'],\r\n        NhomCayTrong: parseInt(inputNCT.value),\r\n        LoaiCayTrong: inputLCT.value == -1 ? null : inputLCT.value,\r\n        DienTich: parseFloat(inputArea.value ? inputArea.value : 0),\r\n        ThoiGianTrongTrot: !inputTGTT.value ? null : inputTGTT.value,\r\n        ThoiGianBatDauTrong: !inputTime.value ? null : inputTime.value,\r\n      }\r\n      let tableDatas = this.tmpDatasDetailTrongTrong.tableDatas;\r\n      let addDatas = this.tmpDatasDetailTrongTrong.adds;\r\n      for (const d of addDatas) {\r\n        if (data.LoaiCayTrong == d.LoaiCayTrong &&\r\n          data.NhomCayTrong == d.NhomCayTrong && data.ThoiGianBatDauTrong === d.ThoiGianBatDauTrong) {\r\n          alert(\"Dữ liệu vừa mới thêm - Không được thêm nữa\")\r\n          return;\r\n        }\r\n      }\r\n      for (const d of tableDatas) {\r\n        if (data.LoaiCayTrong == d.LoaiCayTrong &&\r\n          data.NhomCayTrong == d.NhomCayTrong && data.ThoiGianBatDauTrong === d.ThoiGianBatDauTrong) {\r\n          var ok = confirm(\"Đã có - Tiếp tục thêm\");\r\n          if (ok == true) {\r\n            this.tmpDatasDetailTrongTrong.adds.push(data);\r\n            this.tmpDatasDetailTrongTrong.tableDatas.push(data);\r\n            this.addDataToDetailTrongtrot(data);\r\n\r\n          } else {\r\n            return;\r\n          }\r\n\r\n        }\r\n      }\r\n      this.tmpDatasDetailTrongTrong.tableDatas.push(data);\r\n      this.tmpDatasDetailTrongTrong.adds.push(data);\r\n      this.addDataToDetailTrongtrot(data);\r\n      $('#ModalDetail').modal('toggle');\r\n    })\r\n    divInfo.appendChild(formGroupNCT);\r\n    divInfo.appendChild(formGroupLCT);\r\n    divInfo.appendChild(formGroupArea);\r\n    divInfo.appendChild(formGroupTGTT);\r\n    divInfo.appendChild(formGroupTGTH);\r\n    divInfo.appendChild(btnAdd);\r\n    div.appendChild(divInfo);\r\n    let footer = document.createElement('div');\r\n    footer.appendChild(btnAdd);\r\n    let modalDetail = bootstrap.modal('ModalDetail', 'Thêm dữ liệu', div, footer);\r\n    modalDetail.modal();\r\n  }\r\n  editDetailTrongTrot(item) {\r\n    let div = document.createElement('div');\r\n    let divInfo, formGroupNCT, formGroupLCT, formGroupArea, formGroupTGTT, formGroupTGTH, btnEdit;\r\n    divInfo = document.createElement('div');\r\n\r\n    //LOAI CAY TRONG\r\n    formGroupLCT = document.createElement('div');\r\n    formGroupLCT.classList.add('form-group');\r\n    let lbLCT, inputLCT;\r\n    inputLCT = document.createElement('select');\r\n    inputLCT.id = 'LoaiCayTrong';\r\n    inputLCT.classList.add('form-control');\r\n    lbLCT = document.createElement('label');\r\n    lbLCT.innerText = 'Loại cây trồng';\r\n    lbLCT.setAttribute('for', inputLCT.id);\r\n    formGroupLCT.appendChild(lbLCT);\r\n    formGroupLCT.appendChild(inputLCT)\r\n\r\n\r\n    //NHOM CAY TRONG\r\n    formGroupNCT = document.createElement('div');\r\n    formGroupNCT.classList.add('form-group');\r\n    let lbNCT, inputNCT;\r\n    inputNCT = document.createElement('select');\r\n    inputNCT.id = 'NhomCayTrong';\r\n    inputNCT.value = item[inputNCT.id];\r\n    inputNCT.classList.add('form-control');\r\n    let codedValues = this.layer.getFieldDomain('NhomCayTrong').codedValues;\r\n    for (let codedValue of codedValues) {\r\n      let dmCode = codedValue.code,\r\n        dmName = codedValue.name;\r\n      let option = document.createElement('option');\r\n      option.setAttribute('value', dmCode);\r\n      option.innerHTML = dmName;\r\n      inputNCT.appendChild(option);\r\n    }\r\n    inputNCT.value = item[inputNCT.id];\r\n    var inputNCTChange = () => {\r\n      inputLCT.innerHTML = '';\r\n      let defaultComboValue = document.createElement('option');\r\n      defaultComboValue.value = \"-1\";\r\n      defaultComboValue.innerText = 'Chọn giá trị...';\r\n      inputLCT.appendChild(defaultComboValue);\r\n      let subtype = this.getSubtype('NhomCayTrong', inputNCT.value);\r\n      if (!subtype) return;\r\n      let domain = subtype.domains['LoaiCayTrong'];\r\n      if (!domain) return;\r\n      let codedValues;\r\n      if (domain.type === \"inherited\") {\r\n        let fieldDomain = this.layer.getFieldDomain('LoaiCayTrong');\r\n        if (fieldDomain) codedValues = fieldDomain.codedValues;\r\n      } else { //type is codedValue\r\n        codedValues = domain.codedValues;\r\n      }\r\n      if (!codedValues) return;\r\n      for (let codedValue of codedValues) {\r\n        let dmCode = codedValue.code,\r\n          dmName = codedValue.name;\r\n        let option = document.createElement('option');\r\n        option.setAttribute('value', dmCode);\r\n        option.innerHTML = dmName;\r\n        inputLCT.appendChild(option);\r\n      }\r\n    }\r\n    on(inputNCT, 'change', () => {\r\n      inputNCTChange();\r\n    })\r\n    inputNCTChange();\r\n    inputLCT.value = item[inputLCT.id];\r\n    lbNCT = document.createElement('label');\r\n    lbNCT.innerText = 'Nhóm cây trồng';\r\n    lbNCT.setAttribute('for', inputNCT.id);\r\n    formGroupNCT.appendChild(lbNCT);\r\n    formGroupNCT.appendChild(inputNCT);\r\n\r\n    //DIEN TICH\r\n    formGroupArea = document.createElement('div');\r\n    formGroupArea.classList.add('form-group');\r\n    let lbArea, inputArea;\r\n    inputArea = document.createElement('input');\r\n    inputArea.type = 'number';\r\n    inputArea.id = 'DienTich';\r\n    inputArea.value = item[inputArea.id];\r\n    inputArea.classList.add('form-control');\r\n    lbArea = document.createElement('label');\r\n    lbArea.innerText = 'Diện tích';\r\n    lbArea.setAttribute('for', inputArea.id);\r\n    formGroupArea.appendChild(lbArea);\r\n    formGroupArea.appendChild(inputArea);\r\n\r\n    // Thoi gian trong trot\r\n    formGroupTGTT = document.createElement('div');\r\n    formGroupTGTT.classList.add('form-group');\r\n    let inputTGTT, lbTGTT;\r\n    inputTGTT = document.createElement('input');\r\n    inputTGTT.type = 'date';\r\n    inputTGTT.id = 'ThoiGianTrongTrot';\r\n    inputTGTT.value = DateTimeDefine.formatDateValue(item[inputTGTT.id]);\r\n    inputTGTT.classList.add('form-control');\r\n    lbTGTT = document.createElement('label');\r\n    lbTGTT.innerText = 'Thời gian trồng trọth';\r\n    lbTGTT.setAttribute('for', inputTGTT.id);\r\n    formGroupTGTT.appendChild(lbTGTT);\r\n    formGroupTGTT.appendChild(inputTGTT);\r\n\r\n    // Ngay thu hoach\r\n    formGroupTGTH = document.createElement('div');\r\n    formGroupTGTH.classList.add('form-group');\r\n    let inputTime, lbTime;\r\n    inputTime = document.createElement('input');\r\n    inputTime.type = 'date';\r\n    inputTime.id = 'ThoiGianBatDauTrong';\r\n    inputTime.value = DateTimeDefine.formatDateValue(item[inputTime.id]);\r\n    inputTime.classList.add('form-control');\r\n    lbTGTT = document.createElement('label');\r\n    lbTGTT.innerText = 'Ngày thu hoạch';\r\n    lbTGTT.setAttribute('for', inputTime.id);\r\n    formGroupTGTH.appendChild(lbTGTT);\r\n    formGroupTGTH.appendChild(inputTime);\r\n\r\n    //Add\r\n    btnEdit = document.createElement('button');\r\n    btnEdit.classList.add('btn', 'btn-primary');\r\n    btnEdit.innerText = \"Chấp nhận\";\r\n    on(btnEdit, 'click', () => {\r\n      let data = {\r\n        OBJECTID: item.OBJECTID,\r\n        NhomCayTrong: parseInt(inputNCT.value),\r\n        LoaiCayTrong: inputLCT.value == -1 ? null : inputLCT.value,\r\n        DienTich: parseFloat(inputArea.value ? inputArea.value : 0),\r\n        ThoiGianTrongTrot: !inputTGTT.value ? null : inputTGTT.value,\r\n        ThoiGianBatDauTrong: !inputTime.value ? null : inputTime.value,\r\n      }\r\n      this.editRenderDetailTrongTrot(data);\r\n      $('#ModalDetail').modal('toggle');\r\n    })\r\n    divInfo.appendChild(formGroupNCT);\r\n    divInfo.appendChild(formGroupLCT);\r\n    divInfo.appendChild(formGroupArea);\r\n    divInfo.appendChild(formGroupTGTT);\r\n    divInfo.appendChild(formGroupTGTH);\r\n    divInfo.appendChild(btnEdit);\r\n    div.appendChild(divInfo);\r\n    let footer = document.createElement('div');\r\n    footer.appendChild(btnEdit);\r\n    let modalDetail = bootstrap.modal('ModalDetail', 'Sửa dữ liệu', div, footer);\r\n    modalDetail.modal();\r\n  }\r\n\r\n  showTableDetailTrongTrot() {\r\n    let notify = $.notify({\r\n      message: 'Đang tai dữ liệu...'\r\n    }, {\r\n        showProgressbar: true,\r\n        delay: 20000,\r\n        placement: {\r\n          from: 'top',\r\n          align: 'left'\r\n        }\r\n      })\r\n    this.tmpDatasDetailTrongTrong = {\r\n      adds: [],\r\n      edits: [],\r\n      updates: [],\r\n      deletes: [],\r\n      tableDatas: [],\r\n      tbody: null\r\n    }\r\n    let div = document.createElement('div');\r\n    let tableResponsive = document.createElement('div');\r\n    tableResponsive.classList.add('table-responsive');\r\n    //TABLE ON DIV\r\n    let table = document.createElement('table');\r\n    table.classList.add('table');\r\n    tableResponsive.appendChild(table);\r\n    //THEAD ON TABLE\r\n    let thead = document.createElement('thead');\r\n    thead.innerHTML =\r\n      `<tr>\r\n          <th>Nhóm cây trồng</th>\r\n          <th>Loại cây trồng</th>\r\n          <th>Diện tích</th>\r\n          <th>Thời gian bắt đầu trồng</th>\r\n          <th>Thời gian trồng trọt</th>\r\n          <th>Giai đoạn sinh trưởng</th>\r\n          <th>Tác vụ</th>\r\n        </tr>`\r\n    table.appendChild(thead);\r\n    //TBODY ON TABLE\r\n    let tbody = document.createElement('tbody');\r\n    table.appendChild(tbody);\r\n    this.tmpDatasDetailTrongTrong.tbody = tbody;\r\n\r\n    let footer = document.createElement('div');\r\n    let btnAdd = document.createElement('button');\r\n    btnAdd.classList.add('btn', 'btn-default');\r\n    btnAdd.innerText = \"Thêm dữ liệu\";\r\n    on(btnAdd, \"click\", () => {\r\n      this.addDetailTrongTrot();\r\n\r\n    })\r\n    let btnSubmit = document.createElement('button');\r\n    btnSubmit.classList.add('btn', 'btn-primary');\r\n    btnSubmit.innerText = \"Chấp nhận\";\r\n    on(btnSubmit, 'click', () => {\r\n      this.submitDetailTrongtrot(this.tmpDatasDetailTrongTrong);\r\n    })\r\n    let btnClose = document.createElement('button');\r\n    btnClose.type = 'button';\r\n    btnClose.classList.add('btn', 'btn-default');\r\n    btnClose.setAttribute('data-dismiss', 'modal');\r\n    btnClose.innerText = 'Đóng';\r\n    footer.appendChild(btnSubmit);\r\n    footer.appendChild(btnAdd);\r\n    footer.appendChild(btnClose);\r\n    div.appendChild(tableResponsive);\r\n    this.thoiGianSanXuatTrongTrot.findById(this.attributes['MaDoiTuong']).then(results => {\r\n      if (results.features.length > 0) {\r\n        let features = results.features;\r\n        for (let feature of features) {\r\n          const item = feature.attributes;\r\n          if (!item['NhomCayTrong']) continue;\r\n          let row = this.renderDetailTrongtrot(item);\r\n          tbody.appendChild(row);\r\n        }\r\n        this.tmpDatasDetailTrongTrong.tableDatas = results.features.map(f => {\r\n          return f.attributes\r\n        });\r\n      }\r\n      let modal = bootstrap.modal('ttModal', 'Thời gian trồng trọt', div, footer);\r\n      modal.modal();\r\n      notify.update('type', 'success');\r\n      notify.update('progress', 90);\r\n    })\r\n  }\r\n  editRenderDetailTrongTrot(item) {\r\n    try {\r\n      this.tmpDatasDetailTrongTrong.edits.map(row => {\r\n        if (row.OBJECTID == item.OBJECTID) {\r\n          this.tmpDatasDetailTrongTrong.edits.splice(this.tmpDatasDetailTrongTrong.edits.indexOf(row));\r\n        }\r\n      })\r\n      let tableDatas = [];\r\n\r\n      this.tmpDatasDetailTrongTrong.tableDatas.map(row => {\r\n        row.OBJECTID == item.OBJECTID ? tableDatas.push(item) : tableDatas.push(row);\r\n      })\r\n      this.tmpDatasDetailTrongTrong.tableDatas = tableDatas;\r\n      this.tmpDatasDetailTrongTrong.edits.push(item);\r\n      let rows = this.tmpDatasDetailTrongTrong.tbody.getElementsByTagName('tr');\r\n      let row;\r\n      for (const r of rows) {\r\n        if (r.id == item['OBJECTID'] || r.id == item['ID']) {\r\n          row = r;\r\n          break;\r\n        }\r\n      }\r\n      let tds = row.getElementsByTagName('td');\r\n      let tdNCT = tds[0],\r\n        tdLCT = tds[1],\r\n        tdArea = tds[2],\r\n        tdTGTT = tds[3],\r\n        tdTime = tds[4],\r\n        tdHarvestingTime = tds[5],\r\n        tdMainCrop = tds[6];\r\n      //Nhom Cay Trong\r\n      let NCTcodedValues = this.layer.getFieldDomain('NhomCayTrong').codedValues;\r\n      if (NCTcodedValues) {\r\n        let codeValue = NCTcodedValues.find(f => {\r\n          return f.code == item['NhomCayTrong']\r\n        })\r\n        if (codeValue) tdNCT.innerText = codeValue.name;\r\n      }\r\n      if (!tdNCT.innerText) tdNCT.innerText = item['NhomCayTrong'] || '';\r\n      //Loai cay trong\r\n      let subtype = this.getSubtype('NhomCayTrong', item['NhomCayTrong']);\r\n      if (!subtype) return;\r\n      let domain = subtype.domains['LoaiCayTrong'];\r\n      if (domain) {\r\n        let LCTcodedValues;\r\n        if (domain.type === \"inherited\") {\r\n          let fieldDomain = this.layer.getFieldDomain('LoaiCayTrong');\r\n          if (fieldDomain) LCTcodedValues = fieldDomain.codedValues;\r\n        } else { //type is codedValue\r\n          LCTcodedValues = domain.codedValues;\r\n        }\r\n        if (LCTcodedValues) {\r\n          let codeValue = LCTcodedValues.find(f => {\r\n            return f.code == item['LoaiCayTrong']\r\n          });\r\n          if (codeValue) tdLCT.innerText = codeValue.name;\r\n        }\r\n      }\r\n      if (!tdLCT.innerText) tdLCT.innerText = item['LoaiCayTrong'] || '';\r\n      //dien tich\r\n      tdArea.innerText = item['DienTich'] || '0';\r\n      tdTGTT.innerText = DateTimeDefine.formatNumberDate(item['ThoiGianTrongTrot']);\r\n      //thoi gian thu hoach\r\n      tdHarvestingTime.innerText = DateTimeDefine.formatNumberDate(item['ThoiGianBatDauTrong']);\r\n    } catch (error) {\r\n      throw 'Có lỗi xảy ra trong quá trình thực hiện'\r\n    }\r\n  }\r\n  renderDetailTrongtrot(item, isNew = false) {\r\n    try {\r\n      //tạo <tr>\r\n      let row = document.createElement('tr');\r\n      row.id = item['OBJECTID'] || item['ID'];\r\n      if (isNew) row.classList.add(\"info\");\r\n      //nhom cay trong\r\n      let tdNCT = document.createElement('td');\r\n      // tdNCT.innerText = item['NhomCayTrong'] || '';\r\n      let NCTcodedValues = this.layer.getFieldDomain('NhomCayTrong').codedValues;\r\n      if (NCTcodedValues) {\r\n        let codeValue = NCTcodedValues.find(f => {\r\n          return f.code == item['NhomCayTrong']\r\n        })\r\n        if (codeValue) tdNCT.innerText = codeValue.name;\r\n      }\r\n      if (!tdNCT.innerText) tdNCT.innerText = item['NhomCayTrong'] || '';\r\n      //loai cay trong\r\n      let tdLCT = document.createElement('td');\r\n\r\n      let subtype = this.getSubtype('NhomCayTrong', item['NhomCayTrong']);\r\n      if (!subtype) return;\r\n      let domain = subtype.domains['LoaiCayTrong'];\r\n      if (domain) {\r\n        let LCTcodedValues;\r\n        if (domain.type === \"inherited\") {\r\n          let fieldDomain = this.layer.getFieldDomain('LoaiCayTrong');\r\n          if (fieldDomain) LCTcodedValues = fieldDomain.codedValues;\r\n        } else { //type is codedValue\r\n          LCTcodedValues = domain.codedValues;\r\n        }\r\n        if (LCTcodedValues) {\r\n          let codeValue = LCTcodedValues.find(f => {\r\n            return f.code == item['LoaiCayTrong']\r\n          });\r\n          if (codeValue) tdLCT.innerText = codeValue.name;\r\n        }\r\n      }\r\n      if (!tdLCT.innerText) tdLCT.innerText = item['LoaiCayTrong'] || '';\r\n\r\n      //dien tich\r\n      let tdArea = document.createElement('td');\r\n      tdArea.innerText = item['DienTich'] || '0';\r\n      //thoi gian\r\n      let tdTGTT = document.createElement('td');\r\n      tdTGTT.innerText = DateTimeDefine.formatNumberDate(item['ThoiGianTrongTrot']);\r\n      //thoi gian thu hoach\r\n      let tdHarvestingTime = document.createElement('td');\r\n      tdHarvestingTime.innerText = DateTimeDefine.formatNumberDate(item['ThoiGianBatDauTrong']);\r\n      let tdAction = document.createElement('td');\r\n      //SỬA\r\n      let itemEdit = document.createElement('span');\r\n      itemEdit.classList.add('esri-icon-edit');\r\n      on(itemEdit, 'click', (evt) => {\r\n        this.tmpDatasDetailTrongTrong.tableDatas.map(row => {\r\n          if (row.OBJECTID == item.OBJECTID)\r\n            this.editDetailTrongTrot(row);\r\n        })\r\n      })\r\n      //Xóa\r\n      let itemDelete = document.createElement('span');\r\n      itemDelete.classList.add('esri-icon-trash');\r\n      on(itemDelete, 'click', () => {\r\n        if (item['OBJECTID']) {\r\n          this.tmpDatasDetailTrongTrong.deletes.push(item['OBJECTID'])\r\n          this.tmpDatasDetailTrongTrong.tableDatas.map(row => {\r\n            if (row.OBJECTID == item['OBJECTID']) {\r\n              let index = this.tmpDatasDetailTrongTrong.tableDatas.indexOf(row);\r\n              this.tmpDatasDetailTrongTrong.tableDatas.splice(index, 1);\r\n            }\r\n          });\r\n        }\r\n        this.tmpDatasDetailTrongTrong.tbody.removeChild(row);\r\n        //KIEM TRA CO TRONG ADDS?\r\n        let addItem = this.tmpDatasDetailTrongTrong.adds.find(f => {\r\n          return f.OBJECTID == item.OBJECTID;\r\n        });\r\n        if (addItem) {\r\n          this.tmpDatasDetailTrongTrong.adds.splice(this.tmpDatasDetailTrongTrong.adds.indexOf(addItem));\r\n        }\r\n      });\r\n      tdAction.appendChild(itemEdit);\r\n      tdAction.appendChild(itemDelete);\r\n      row.appendChild(tdNCT);\r\n      row.appendChild(tdLCT);\r\n      row.appendChild(tdArea);\r\n      row.appendChild(tdTGTT);\r\n      row.appendChild(tdHarvestingTime);\r\n      row.appendChild(tdAction);\r\n      return row;\r\n\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n  addDataToDetailTrongtrot(data) {\r\n    let row = this.renderDetailTrongtrot(data, true);\r\n    this.tmpDatasDetailTrongTrong.tbody.appendChild(row);\r\n  }\r\n  //Cập nhật lại các adds, edits.\r\n  submitData(datas) {\r\n    let adds = [],\r\n      edits;\r\n    datas.tableDatas.map(fs => {\r\n      if (datas.adds.some(f => {\r\n        return f.OBJECTID == fs.OBJECTID;\r\n      })) adds.push(fs);\r\n    });\r\n    this.tmpDatasDetailTrongTrong.adds = adds;\r\n    edits = datas.edits.filter(f => {\r\n      return datas.adds.indexOf(f);\r\n    })\r\n    this.tmpDatasDetailTrongTrong.edits = edits;\r\n  }\r\n  submitDetailTrongtrot(datas) {\r\n    this.submitData(datas);\r\n    let applyEdits = {\r\n      addFeatures: [],\r\n      updateFeatures: [],\r\n      deleteFeatures: []\r\n    }\r\n    if (datas.deletes.length > 0) {\r\n      applyEdits.deleteFeatures = datas.deletes;\r\n    }\r\n    if (datas.adds.length > 0) {\r\n      for (let item of datas.adds) {\r\n        applyEdits.addFeatures.push({\r\n          attributes: item\r\n        });\r\n      }\r\n\r\n    }\r\n    if (datas.edits.length > 0) {\r\n      for (let item of datas.edits) {\r\n        applyEdits.updateFeatures.push({\r\n          attributes: item\r\n        });\r\n      }\r\n    }\r\n    this.thoiGianSanXuatTrongTrot.applyEdits(applyEdits).then(function (e) {\r\n      console.log(e);\r\n      $('#ttModal').modal('toggle');\r\n    })\r\n  }\r\n  /**\r\n   * ATTACHMENT\r\n   */\r\n  uploadFile() {\r\n    let url = this.layer.url + \"/\" + this.layer.layerId + \"/\" + this.objectId + \"/addAttachment\";\r\n    let attachmentForm = document.getElementById('attachment-data') as HTMLFormElement;\r\n    if (attachmentForm) {\r\n      esriRequest(url, {\r\n        responseType: 'json',\r\n        body: attachmentForm\r\n      }).then(res => {\r\n        if (res.data && res.data.addAttachmentResult && res.data.addAttachmentResult.success) {\r\n          $.notify({ message: 'Thêm hình ảnh thành công' }, {\r\n            type: 'success',\r\n            placement: {\r\n              from: 'top',\r\n              align: 'left'\r\n            }\r\n          });\r\n        } else {\r\n          $.notify({\r\n            message: 'Thêm hình ảnh không thành công',\r\n          }, {\r\n              type: 'danger',\r\n              placement: {\r\n                from: 'top',\r\n                align: 'left'\r\n              }\r\n            });\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * * * * * * * * * * XÓA - SỬA * * * * * * * * * *\r\n   */\r\n\r\n  /**\r\n   * Sự kiện chỉnh sửa thông tin đối tượng\r\n   */\r\n  editFeature() {\r\n    let notify = $.notify({\r\n      title: `<strong>Cập nhật <i>${this.layer.title}</i></strong>`,\r\n      message: 'Cập nhật...'\r\n    }, {\r\n        showProgressbar: true,\r\n        delay: 20000,\r\n        placement: {\r\n          from: 'top',\r\n          align: 'left'\r\n        }\r\n      })\r\n    try {\r\n      if (this.attributes) {\r\n        if (this.attributes['attachment']) {\r\n          this.uploadFile();\r\n        }\r\n        if (this.attributes.deleteAttachment) {\r\n          for (let url of this.attributes.deleteAttachment) {\r\n            esriRequest(url);\r\n          }\r\n          this.attributes.deleteAttachment = [];\r\n        }\r\n        for (let field of this.layer.fields) {\r\n          const type = field.type,\r\n            name = field.name;\r\n          if (type === 'date') {\r\n            let date = this.attributes[name]\r\n            //nếu như date có giá trị và date không phải là số\r\n            if (date && !Number.isInteger(date)) {\r\n              let\r\n                splitDate = date.split('-');\r\n              if (splitDate.length == 3) {\r\n                let day = splitDate[2],\r\n                  month = splitDate[1],\r\n                  year = splitDate[0];\r\n                var dayString = new Date(`${month}/${day}/${year}`);\r\n                const timestamp = dayString.getTime();\r\n                this.attributes[name] = timestamp;\r\n              } else {\r\n                throw 'Không thể lấy dữ liệu thời gian'\r\n              }\r\n            }\r\n          }\r\n        }\r\n        const updatedInfo = editingSupport.getUpdatedInfo(this.view)\r\n        for (let i in updatedInfo) {\r\n          this.attributes[i] = updatedInfo[i];\r\n        }\r\n        this.layer.applyEdits({\r\n          updateFeatures: [{\r\n            attributes: this.attributes\r\n          }]\r\n        }).then((res) => {\r\n          //khi applyEdits, nếu phát hiện lỗi\r\n          let valid = false;\r\n          for (let item of res.updateFeatureResults) {\r\n            if (item.error) {\r\n              valid = true;\r\n              break;\r\n            }\r\n          }\r\n          //không phát hiện lỗi nên tắt popup\r\n          if (!valid) {\r\n            notify.update('type', 'success');\r\n            notify.update('message', 'Cập nhật thành công!', )\r\n            notify.update('progress', 90);\r\n            let query = this.layer.createQuery();\r\n            query.outField = ['*'];\r\n            query.where = 'OBJECTID=' + this.attributes['OBJECTID'];\r\n            this.layer.queryFeatures(query).then(res => {\r\n              this.view.popup.open({\r\n                features: res.features\r\n              })\r\n            })\r\n          }\r\n        })\r\n      }\r\n\r\n    } catch (error) {\r\n      notify.update('type', 'danger', )\r\n      notify.update('message', 'Có lỗi xảy ra trong quá trình cập nhật!', )\r\n      notify.update('progress', 90);\r\n      throw error;\r\n    }\r\n  }\r\n  /**\r\n   * Xóa đối tượng được chọn\r\n   */\r\n  deleteFeature() {\r\n    let accept = confirm('Chắc chắn muốn xóa?');\r\n    if (!accept) return;\r\n    let objectId = this.objectId;\r\n    let notify = $.notify({\r\n      title: `<strong>Xóa <i>${this.layer.title}</i></strong>`,\r\n      message: 'Đang xóa...'\r\n    }, {\r\n        showProgressbar: true,\r\n        delay: 20000\r\n      })\r\n    this.layer.applyEdits({\r\n      deleteFeatures: [{\r\n        objectId: objectId\r\n      }] //xoa objectID truyen vao\r\n    }).then((res) => {\r\n      if (res.deleteFeatureResults.length > 0 && !res.deleteFeatureResults[0].error) {\r\n        this.view.popup.visible = false;\r\n        notify.update('type', 'success')\r\n        notify.update('message', 'Xóa thành công!');\r\n        notify.update('progress', 100)\r\n      }\r\n    });\r\n  }\r\n  updateGeometryGPS() {\r\n    let objectId = this.objectId;\r\n    let notify = $.notify({\r\n      title: `<strong>Cập nhật vị trí</strong>`,\r\n      message: 'Cập nhật...'\r\n    }, {\r\n        showProgressbar: true,\r\n        delay: 20000,\r\n        placement: {\r\n          from: 'top',\r\n          align: 'left'\r\n        }\r\n      })\r\n    this.locateViewModel.locate().then(res => {\r\n      const coords = res.coords,\r\n        latitude = coords.latitude,\r\n        longitude = coords.longitude;\r\n      const geometry = new Point({\r\n        latitude: latitude,\r\n        longitude: longitude,\r\n        spatialReference: this.view.spatialReference\r\n      })\r\n      this.layer.applyEdits({\r\n        updateFeatures: [{\r\n          attributes: {\r\n            objectId: objectId\r\n          },\r\n          geometry: geometry\r\n        }]\r\n      }).then(res => {\r\n        if (res.updateFeatureResults[0].error) {\r\n          notify.update('type', 'danger', )\r\n          notify.update('message', 'Cập nhật không thành công!', )\r\n          notify.update('progress', 90)\r\n        } else {\r\n          notify.update('type', 'success')\r\n          notify.update('message', 'Cập nhật thành công!')\r\n          notify.update('progress', 90)\r\n          this.view.popup.close();\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\nexport = PopupEdit;"]}